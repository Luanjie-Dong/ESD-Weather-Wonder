version: '3.8'

networks:
  weatherwonder_network:
    driver: bridge
    name: weatherwonder_network

services:
  # location_weather microservice
  location_weather:
    build: ./location_weather
    ports:
      - '5003:5003'
    env_file:
      - ./location_weather/.env
    depends_on:
      - rabbitmq
    restart: on-failure

  geocding:
    build: 
      context: ./geocoding
      dockerfile: Dockerfile.encoder
    ports:
      - '5004:5004'
    env_file:
      - ./geocoding/.env
    restart: on-failure

  user:
    build: 
      context: ./user
      dockerfile: Dockerfile
    ports:
      - '5000:5000'
    env_file:
      - ./user/.env
    restart: on-failure